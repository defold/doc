---
title: Формы столкновений
brief: Объект столкновения может использовать несколько геометрических примитивов в качестве формы или одну сложную форму.
---

# Формы столкновений

Объект столкновения может использовать несколько геометрических примитивов в качестве формы или одну сложную форму.

### Примитивы форм
Геометрические примитивы форм это *box*, *sphere* и *capsule*. Добавить примитивную форму можно <kbd>нажав правую кнопку мыши</kbd> на объекте столкновения и выбрать <kbd>Add Shape</kbd>:

![Add a primitive shape](images/physics/add_shape.png)

## Форма коробки
У коробки есть позиция, вращение и размеры (ширина, высота и глубина):

![Box shape](images/physics/box.png)

## Форма сферы
У сферы есть позиция, вращение и диаметр:

![Sphere shape](images/physics/sphere.png)

## Форма капсулы
У капсулы есть позиция, вращение, диаметр и высота:

![Sphere shape](images/physics/capsule.png)

::: important
Форма капсулы поддерживается только при использовании 3D физики (настраивается в секции Physics файла *game.project*).
:::

### Сложные формы
Сложная форма может быть создана либо из компонента тайловой карты или из выпуклой формы (convex hull).

## Форма столкновений из тайловой карты
В Defold встроена функция, позволяющая вам легко генерировать физические формы для источника тайлов, используемого тайловой картой. [Руководство по источникам тайлов](/manuals/tilesource/#tile-source-collision-shapes) объясняет как добавлять группы столкновений в источник тайлов и назначать тайлы группе столкновений ([пример](/examples/tilemap/collisions/)).

Чтобы добавить столкновение к тайловой карте:

1. Добавьте тайловую карту игровому объекту <kbd>кликнув правой кнопкой мыши</kbd> на игровом объекте и выбрав <kbd>Add Component File</kbd>. Выберитие файл тайловой карты.
2. Добавьте объект столкновения <kbd>кликнув правой кнопкой мыши</kbd> на игровом объекте и выбрав <kbd>Add Component ▸ Collision Object</kbd>.
3. Вместо добавления форм компоненту столкновений, выставите значение свойства *Collision Shape* в файл *тайловой карты*
4. Выставите *Свойства* объекта столкновений как обычно.

![Tilesource collision](images/physics/collision_tilemap.png){srcset="images/physics/collision_tilemap@2x.png 2x"}

::: important
Учтите, что свойство *Group* **не** учитывается в таком случае, так как группы столкновений задаются в источнике тайлов соответствующей тайловой карты.
:::

## Выпуклые формы
В Defold встроена функция, позволяющая вам создавать выпуклые формы из трех или более точек. Можно воспользоваться внешним инструментом, таким как [Defold Polygon Editor](/assets/defoldpolygoneditor/) или [Physics Body Editor](/assets/physicsbodyeditor/) для создания выпуклых форм.

1. Создайте файл выпуклой формы (расширение файла `.convexshape`) используя внешний редактор.
2. Вместо добавления форм к объекту столкновений, выставите значение свойства *Collision Shape* в файл *выпуклой формы*.

::: sidenote
Форма не будет отрисована в редакторе. Вы можете [включить отладку Физики](/manuals/debugging/#debugging-problems-with-physics) во время выполнения игры, чтобы видеть формы.
:::


# Масштабирование форм столкновений
Объект столкновения и его формы наследуют масштаб игрового объекта. Чтобы отключить это поведение, отожмите галку [Allow Dynamic Transforms](/manuals/project-settings/#allow-dynamic-transforms) в секции Physics *game.project*. Учтите, что поддерживается только равномерное масштабирование, а также то, что будет применено наименьшее значение масштабирования, если было задано не равномерное масштабирование.


# Вращение форм столкновения

## Вращение форм столкновения в 3D физике
Формы столкновения в 3D физике могут поворачиваться вокруг всех осей.


## Вращение форм столкновения в 2D физике
Формы столкновения в 2D физике могут поворачиваться только вокруг оси z. Вращение вокруг осей x или y выльется в некорректные результаты и его стоит избегать, даже когда происходит вращение на 180 градусов для фактически переворота формы вокруг оси x или y. Для переворота физической формы рекомендуется использовать [`physics.set_hlip(url, flip)`](/ref/stable/physics/?#physics.set_hflip:url-flip) и [`physics.set_vlip(url, flip)`](/ref/stable/physics/?#physics.set_vflip:url-flip).
